#!/usr/bin/env bash

script_dir=`dirname $(readlink -f $0)`

# include repos, remove comments and empty lines
repos=$(cat $script_dir/repos | grep -v '^#' | grep -v '^$')
echo repos: $repos

# create symlinks
ln -sf ~/.vim/vimrc ~/.vimrc
ln -sf ~/.vim/gvimrc ~/.gvimrc

# install pathogen; see https://github.com/tpope/vim-pathogen#installation
mkdir -p ~/.vim/autoload ~/.vim/bundle && \
  curl -LSso ~/.vim/autoload/pathogen.vim https://tpo.pe/pathogen.vim

# install vim plugin repos
(
  cd ~/.vim/bundle
  for repo in $repos
  do
    git clone https://github.com/$repo
  done

  # post git clone commands

  ( cd vimproc.vim && make )
  (cd command-t/ruby/command-t/ext/command-t && ruby extconf.rb && make)
)
